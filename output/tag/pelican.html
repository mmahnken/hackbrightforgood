<!DOCTYPE html>
<html lang="py">
<head>
        <meta charset="utf-8" />
        <title>Hack(bright) for Good - pelican</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">Hack(bright) for Good </a></h1>
                <nav><ul>
                    <li><a href="/category/event-info.html">Event Info</a></li>
                    <li><a href="/category/resources.html">Resources</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/hello-world.html">The test page</a></h1>
<footer class="post-info">
        <abbr class="published" title="2014-04-14T10:25:00">
                Mon 14 April 2014
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="/author/meggie-mahnken.html">Meggie Mahnken</a>
        </address>
<p>In <a href="/category/resources.html">Resources</a>. </p>
<p>tags: <a href="/tag/testing.html">testing</a><a href="/tag/python.html">python</a><a href="/tag/pelican.html">pelican</a></p>
</footer><!-- /.post-info --><h1>hba_internal</h1>
<p><strong><em>You'll need to set up your environment properly to use this application. Here are the steps</em></strong></p>
<p>Sign up for a Heroku account and install the Heroku toolbelt (https://toolbelt.heroku.com/). This installs a program named  foreman you will need to run the app.</p>
<p>Install and run Postgres (Postgres.app on a Mac) if you don't alerady have it as well.</p>
<p>Install redis</p>
<div class="highlight"><pre>brew install redis
</pre></div>


<p>Run redis using <code>redis-server</code></p>
<p>Launch <code>psql -h localhost</code> to get a CLI to your database.</p>
<p>Create a database for your project. I recommend "hba_internal" since it's also the name of the app. The command to do this is <code>CREATE DATABASE hba_internal;</code>. This will make it easy to keep track of.
Remember to include this database name in your .env file so the app knows where to find it. Just because you've created it doesn't mean you're connected to it.</p>
<p>To change your current database connection in psql, use the command <code>\c hba_internal</code>.</p>
<p>Next, ask Liz for the github id / secret and create a .env file in your working directory that looks like this:</p>
<div class="highlight"><pre><span class="nv">GITHUB_CLIENT_ID</span><span class="o">=</span>&lt;Client ID from Liz&gt;
<span class="nv">GITHUB_CLIENT_SECRET</span><span class="o">=</span>&lt;Client Secret from Liz&gt;
<span class="nv">SECRET_KEY</span><span class="o">=</span>localtesting
<span class="nv">DATABASE_URL</span><span class="o">=</span>postgres://localhost:5432/hba_internal
<span class="nv">DEBUG</span><span class="o">=</span>True
</pre></div>


<p>This configuration allows you to run the app locally on your machine. The production .env lives on Heroku.</p>
<p>Set up your working environment, activate it and <code>pip install -r requirements.txt</code></p>
<h1>Running the workers</h1>
<p>We are using celery to run background workers / queues for email delivery. To start it, run the following command</p>
<p><code>foreman run celery -A flask_globals.celery worker -B</code></p>
<h1>Running the App</h1>
<h2>Bootin' flask</h2>
<p>The app uses foreman, which can assist in booting and settting up the
app. Run the following commands to create the DB and run.
- foreman run alembic upgrade head
- foreman start web</p>
<p>BEWARE: Running <code>foreman start worker</code> at any time after you've been working on the db will wipe your db clean.</p>
<p>Once you have started the app, open <code>localhost:5000</code> and signup using
github. Log in to the app with your github password.</p>
<h2>Hacking the planet</h2>
<p>If you boot the app right away, by default you'll see just the signup form that is show to prospective students. You will need to make a couple changes to your database to log in as an instrcutor.
In your shell, type <code>psql -h localhost</code> to start a Postgres command line.</p>
<p>To get this part to work correctly, your database needs to be using UTC time. The command to set that FOR THIS SESSION ONLY is:</p>
<div class="highlight"><pre><span class="k">set</span> <span class="n">time</span> <span class="k">zone</span> <span class="mi">0</span><span class="p">;</span>
</pre></div>


<p>It is possible to set it globally for Postgres, but that is outside of the scope of this document.</p>
<p>Then, you need to update your login to be an instructor.
<em>This part is sort of broken. id should auto-increment.</em></p>
<div class="highlight"><pre><span class="k">insert</span> <span class="k">into</span> <span class="n">status_events</span> <span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">created</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">event_creator</span><span class="p">)</span> <span class="k">values</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">now</span><span class="p">(),</span> <span class="s1">&#39;instructor&#39;</span> <span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</pre></div>


<p>This will create the necessary permissions to see everything in the app. Refresh your browser and you should be good to go.</p>
<h2>Seeding the DB</h2>
<p>Run the following command to get some sample seed data.</p>
<div class="highlight"><pre><span class="n">foreman</span> <span class="n">run</span> <span class="n">python</span> <span class="n">seed</span><span class="p">.</span><span class="n">py</span>
</pre></div>


<h2>Deploying The app</h2>
<p>See docs/deploy.md</p>                </article>
<p class="paginator">
    Page 1 / 1
</p>
            </aside><!-- /#featured -->
            </ol><!-- /#posts-list -->
            </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://hackbrightacademy.com">Hackbright Website</a></li>
                            <li><a href="http://a.hackbrightacademy.com">Apply to Hackbright</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="https://twitter.com/Hackbright">hackbright on twitter</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>